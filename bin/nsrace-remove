#!/usr/bin/env node

const cli = require('commander')
const assert = require('assert')
const remove = require('just-remove')
const config = require('../lib/config')

const DEFAULT_TYPE = 'dns'

cli
  .option("-t, --type [dns|doh]", `Server type`, DEFAULT_TYPE)
  .parse(process.argv)

assert(['dns', 'doh'].includes(cli.type), 'Invalid type')

const key = `servers.${cli.type}`
const latest = config.get(key) || []
const next = remove(latest, cli.args)
config.set(key, next)

console.log(`${latest.length - next.length} DNS servers removed.`)
